<div ng-controller="PlanMenubarCtrl as PlanMenubar" class="menubar" ng-include="'scripts/templates/planmenubar.html'"></div>

<div ng-controller="ToolbarCtrl as Toolbar" class="toolbar">
  <div class="goals">
    <span class="toolbar-head">Mål</span>
    <span class="float-right toolbar-clear">Ryd alle</span>
  </div>
  <div class="courses">
    <span class="toolbar-head">Forløb</span>

  </div>
  <div class="selected">
    <ul>
      <li class="toolbar-head">Dine valgte forløb</li>
      <li>
        <span class="count">6</span>
      </li>
    </ul>
   <!-- <span class="toolbar-head">Dine valgte forløb</span>
    <span class="count float-right">6</span>-->
  </div>
</div>


<div class="plan-content">
  <div class="goals">
    <div class="goal-container"  ng-repeat="elem in Plan.plandata.planlaegger.kompetenceomraader.kompetenceomraade">
      <div class="head" ng-click="Plan.activeGoal = $index; Plan.activeSubGoal = '';" ng-class="{active: Plan.activeGoal == $index}">
        <span>{{elem.value}}</span>
        <span class="round-arrow" ng-class="{active: Plan.activeGoal == $index}"></span>
        <span class="check"></span>

      </div>
      <div class="goal-content" ng-show="Plan.activeGoal == $index">
        <ul>
          <li  ng-repeat="subelem in elem.faerdighedsOgVidensmaalPLURALIS.faerdighedsOgvidensmaalSINGULARIS">
            <div class="sub-head" ng-class="{'active': Plan.activeSubGoal == subelem.id}" ng-click="Plan.activeSubGoal = subelem.id">
              {{subelem.value}}
            </div>
            <div class="sub-content" ng-show="Plan.activeSubGoal == subelem.id">
              <ul class="sub-content-elem">
                <li ng-repeat="subsubelem in subelem.faser.fase">
                  <div class="sub-content-scope">{{subsubelem.scope}}</div>
                  <ul class="sub-content-text">
                    <li>{{subsubelem.faerdighedsmaal}}</li>
                    <li>{{subsubelem.vidensmaal}}</li>
                  </ul>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="courses">

    <div class="dropdown level">
      <div class="select">
        <div class="select-inner">
          <div ng-class="{active : Plan.dropDown == 'level'}" class="dropdown_header" ng-click="Plan.dropDown = 'level'">{{Plan.selectedLevel || "Alle klassetrin"}}</div>
          <div ng-if="Plan.dropDown == 'level'" ng-class="{dropdown_content : Plan.dropDown == 'level'}" class="animate col-1-8">
            <ul>
              <li>
                <div class="custom-radio" ng-repeat="option in Plan.levels" >
                  <input id="level-dropdown{{$index}}" type="radio" name="check" value="Plan-checkfrom-{{input.id}}{{$index}}" ng-checked="Plan.selectedLevel == option">
                  <label for="level-dropdown{{$index}}" ng-click="Plan.selectedLevel = Plan.levels[$index]; Plan.dropDown = ''">{{option}}</label>
                </div>
              </li>
            </ul>
          </div>
          <div ng-show="Plan.dropDown == 'level'" ng-click="Plan.dropDown =''" class="plan-overlay"></div>
        </div>
      </div>
    </div>
    <div class="dropdown course">
      <div class="select">
        <div class="select-inner">
          <div ng-class="{active : Plan.dropDown == 'course'}" class="dropdown_header" ng-click="Plan.dropDown = 'course'">{{Plan.selectedCourse || "Alle forløb"}}</div>
          <div ng-if="Plan.dropDown == 'course'" ng-class="{dropdown_content : Plan.dropDown == 'course'}" class="animate col-1-8">
            <ul>
              <li>
                <div class="custom-radio" ng-repeat="option in Plan.courses" >
                  <input id="course-dropdown{{$index}}" type="radio" name="check" value="Plan-checkfrom-{{input.id}}{{$index}}" ng-checked="Plan.selectedCourse == option">
                  <label for="course-dropdown{{$index}}" ng-click="Plan.selectedCourse = Plan.courses[$index]; Plan.dropDown = ''">{{option}}</label>
                </div>
              </li>
            </ul>
          </div>
          <div ng-show="Plan.dropDown == 'course'" ng-click="Plan.dropDown =''" class="plan-overlay"></div>
        </div>
      </div>
    </div>

    <div class="course-container" ui-draggable="true" drag-channel="courses" on-drop-success="Plan.dropSuccessHandler($event,$index,Plan.selected)" drag="course" ng-repeat="course in Plan.courses">
      <span class="course-title">{{course}}</span>
      <span class="course-icon icon ion-grid"></span>
    </div>
  </div>

  <div class="selected" ng-class="{empty: !Plan.selected.length}" ui-on-Drop="Plan.onDrop($event,$data,Plan.selected)" drop-channel="courses">
    <div class="planner-title" >
      <input type="text" placeholder="Vælg forløbstitel" ng-model="Plan.pannerTitle">
      <span class="icon-trash-bin"></span>

    </div>

    <div class="course-container" ng-repeat="course in Plan.selected track by $index">
      <span class="course-title">{{course}}</span>
      <span class="course-icon icon ion-grid"></span>
    </div>
  </div>


</div>